<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ page.title | default: site.title }}</title>
    <link rel="stylesheet" href="{{ "/assets/css/style.css?v=" | append: site.github.build_revision | relative_url }}">
    <!-- Mermaid.js for diagrams -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        mermaid.initialize({
          startOnLoad: true,
          theme: 'default',
          themeCSS: '.node rect { fill: #f2f2f2; stroke: #aaa; } .cluster rect { fill: #f8f8f8; stroke: #ddd; }',
          flowchart: { useMaxWidth: true, htmlLabels: true },
          securityLevel: 'loose'
        });
      });
    </script>
    <style>
      .sidebar {
        background-color: #f5f5f5;
        padding: 10px;
        border-radius: 5px;
        margin-bottom: 15px;
      }
      .sidebar h3 {
        margin-top: 0;
      }
      .sidebar ul {
        list-style-type: none;
        padding-left: 0;
      }
      .sidebar li {
        margin-bottom: 5px;
      }
      .diagram-container {
        background-color: white;
        padding: 15px;
        border-radius: 5px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        margin: 20px 0;
      }
      footer {
        font-size: 0.8em;
        color: #777;
        border-top: 1px solid #eee;
        padding-top: 10px;
        margin-top: 30px;
      }
    </style>
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1><a href="{{ "/" | absolute_url }}">{{ site.title | default: site.github.repository_name }}</a></h1>
        
        {% if site.logo %}
          <img src="{{site.logo | relative_url}}" alt="Logo" />
        {% endif %}

        <p>{{ site.description | default: site.github.project_tagline }}</p>

        <div class="sidebar">
          <h3>Navigation</h3>
          <ul>
            {% for nav_item in site.nav %}
              <li><a href="{{ nav_item.url }}">{{ nav_item.title }}</a></li>
            {% endfor %}
          </ul>
        </div>

        <p><a href="{{ site.github.repository_url }}">View on GitHub</a></p>
      </header>
      <section>
        {{ content }}
      </section>
      <footer>
        <p>This documentation was generated by <a href="https://github.com/{{ github_username|default('yourusername') }}/insight_forge">InsightForge</a>.</p>
        <p>Last updated: {{ last_updated|default('now'|date('%Y-%m-%d')) }}</p>
      </footer>
    </div>
  </body>
</html>